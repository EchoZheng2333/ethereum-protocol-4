---
timezone: UTC+8
---

> 请在上边的 timezone 添加你的当地时区(UTC)，这会有助于你的打卡状态的自动化更新，如果没有添加，默认为北京时间 UTC+8 时区


# 你的名字

1. 自我介绍
   jitash
2. 你认为你会完成本次残酷学习吗？
   可以
3. 你的联系方式（推荐 Telegram）
   @oxoavi

## Notes

<!-- Content_START -->

### 2025.06.17

- 以太坊协议架构核心由执行层和共识层组成
    1. 执行层直接面向实际交易与用户交互，是以太坊系统处理各类业务逻辑的关键环节，如同计算机执行各种应用程序。
    2. 共识层则从机制层面保障网络的一致性和安全性，通过权益证明机制，确保所有节点在区块链的发展方向上达成一致，维护执行层规范链的有序推进。
- 执行层和共识层在各自客户端通过 API 连接来实现整体架构。
    1. 这种实现方式使得不同层的功能可以相对独立地进行开发和维护，同时又能通过 API 进行高效交互。
    2. 每个客户端都有专门处理不同类型数据的对等网络，这种分工协作的方式有助于提高整个系统的数据处理效率和网络运行的稳定性。
- 以太坊选择账户模型而非 UTXO 模型
    1. 在空间占用上，账户模型更节省，如存储 5 个 UTXO 转换为账户模型后空间大幅减少；可替代性方面，账户完全可替代，UTXO 则存在缺陷；
    2. 实现复杂度上，账户模型更简单，利于开发复杂交易，如去中心化交易所的实现。虽账户模型需用 nonce 防止重放攻击，但可通过设置交易包含块号解决。
- 数据结构从 Merkle - Patricia Trie 向 Verkle 树发展，前者有确定性和可验证性，但随着网络发展，后者因证明更小、利于实现无状态性受关注。序列化从 RLP 到 SSZ，SSZ 解决了 RLP 不支持 Merkle 化的问题，具备高效重新哈希和快速索引能力，为以太坊实现无状态性奠定基础。

### 2025.06.18

- 以太坊通过 Casper FFG 保证最终性，验证者两轮投票确定检查点，使其成为规范链一部分。
    - LMD - GHOST 作为分叉选择规则，与 Casper FFG 结合成 Gasper 协议。
    - 网络架构上，利用 DHT 发现节点，gossip 协议传播区块，这种结合方式兼具节点引导的全局视角与网络健壮性，在高 churn 网络中优势显著。
- 演变
    - Frontier
        - 前沿版本是以太坊协议的起点，作为测试版，为开发者提供了学习和实践的基础平台。其硬编码的燃料上限保障了协议初期的稳定运行，后续通过分叉调整上限，以适应网络发展。金丝雀合约这一独特机制，巧妙地解决了可能出现的链升级阻碍问题，通过简单的二元信号，让客户端能及时响应升级需求，避免长时间中断，为协议后续发展奠定基础。
    - Homestead
        - 标志着以太坊走向成熟。EIP - 2 通过一系列调整，如增加合约创建成本、完善难度调整算法等，优化了协议的经济模型和稳定性。对交易签名 s 值的限制，有效解决了交易可塑性问题，提升了交易跟踪的可靠性。同时，新操作码 DELEGATECALL 的引入，为合约间的调用提供了更便捷的方式，增强了智能合约的功能。EIP - 8 从网络层面确保了客户端对未来升级的兼容性，遵循相关协议规范，使以太坊网络具备更好的扩展性。
    - The Merge
        - 是以太坊发展的重大里程碑，通过激活 EIP - 3675，以太坊将共识机制从工作量证明转变为权益证明。这一变革不仅解决了工作量证明能耗高的问题，还通过独立的 Beacon Chain 实现了更复杂、高效的共识机制。经过长时间稳定运行，Beacon Chain 证明了自身的可靠性，成功成为以太坊新的共识提供者，推动以太坊进入新的发展阶段。

### 2025.06.19

#### 执行层

- 状态转换
    - 执行层的核心是执行状态转换函数，它决定了区块链状态的演变。通过特定公式清晰界定了区块链状态转换前后的关系，强调系统状态推导方式与实际实现细节的差异，突出理论模型与实践的联系和区别。例如，状态转换函数的输入（前一状态和当前区块）与输出（新状态）明确了执行层在区块链运行中的关键作用，如同生产线的核心环节，决定着产品（区块链状态）的更新。
- 状态转换函数执行流程
    - 状态转换函数执行步骤严谨且全面，从获取和验证区块头信息，到执行交易、验证参数再到最终添加或处理区块，每个环节紧密相连，任何一步出错都会引发 “无效块” 错误。这种严格的流程确保了区块链数据的准确性和完整性，就像精密仪器的操作流程，任何一个环节的失误都可能导致仪器故障。例如，在验证区块头时，对燃气使用、时间戳等多方面的验证，防止了不符合规则的区块进入区块链，保障了整个网络的正常运行。     
- 区块头有效性验证
    - 从燃气相关的使用限制、限制范围，到时间戳的先后顺序，再到区块的其他属性如叔块哈希、难度等的规定，全方位确保每个区块符合以太坊协议要求。这些条件相互配合，构建了一个严密的筛选机制，如同关卡，只有通过所有关卡的区块才能被认可。例如，燃气使用不能超过限制，且限制范围与父区块相关，这种动态的限制条件既考虑了当前区块的实际情况，又兼顾了与父区块的连贯性，保证了区块链网络的稳定运行。
- 经济模型
    - 以太坊经济模型在 EIP - 1559 影响下，通过设置目标燃气限制、优化交易处理时间、稳定区块奖励发放、可预测基础费用调整以及基础费用燃烧和优先费用机制等，实现网络效率、稳定性和用户体验的提升。例如，基础费用燃烧机制减少了以太坊的通胀，使得经济环境更加健康，如同调节经济的杠杆，合理控制货币的流通量，促进经济的良性发展。
    - EIP-1559 是以太坊改进提案，于 2021 年 8 月 5 日在伦敦硬分叉升级中激活，旨在优化以太坊区块链的费用市场系统。

### 2025.06.20

- 客户端架构
    - 执行层客户端核心功能与架构
        - 执行层客户端功能多元，除交易执行外，还保障区块链数据准确、网络通信顺畅及交易池有序。其架构以执行引擎为顶层，经共识层驱动，依循特定标准。
        - 如执行层在 DevP2P 网络层上运作，借助引导节点初始化网络，各组件协同确保以太坊网络稳定运行。
        - 例如，执行层客户端通过八卦协议与其他客户端交流，传播交易信息，维持网络数据一致性。
    - 关键组件功能解析
        - EVM 是以太坊关键，虚拟化设计使程序执行结果不受硬件影响，符合三明治复杂性模型。
        - 以太坊的 “状态” 概念独特，与比特币不同，维护综合数据集合。交易触发 EVM 状态转换，改变以太坊网络状态。DevP2P 作为通信接口，保障交易在网络中高效传播。
        - JSON - RPC API 为外部交互提供标准，Engine API 实现层间内部通信。如 Engine API 的 new payload 和 fork choice updated 方法，分别处理有效载荷验证插入与状态同步及区块构建。
    - 状态同步策略
        - 全量同步从创世块开始重放所有区块和交易，虽安全性高，但耗时久且资源消耗大，随区块高度增加问题更突出，EIP - 4444 实施后将被弃用。
        - 快照同步选择近期最终确定的区块为枢轴，仅获取叶节点和默克尔证明重建状态，大幅缩短同步时间，但愈合阶段对硬件要求高。两种策略各有利弊，节点可依自身需求选择
    - Geth 客户端的运作流程
        - Geth 处理交易时，严格验证签名、检查随机数、扣除燃气费并更新状态。
        - 交易先入内存池，后被选取执行，修改账户余额等状态数据。
        - 处理完区块内所有交易后，提交最终状态并存储状态根哈希。
        - Geth 通过 DevP2P 与其他节点通信，运行 EVM 处理智能合约逻辑，在以太坊网络中扮演重要角色。例如，用户发起的与智能合约交互的交易，由 Geth 的 EVM 准确执行。
    - 执行层内部共识引擎
        - 执行层的 ethone 共识引擎具备部分完整共识引擎功能。
        在不同共识机制（如权益证明、权威证明、工作量证明）下，其在确定区块创建者、验证头部、准备区块、最终确定及组装等功能上实现方式各异。例如，在权益证明中，根据特定条件检索区块创建者地址；在权威证明中，验证头部时间、签名等多种条件。
    


<!-- Content_END -->
